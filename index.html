<!-- Save as index.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Cédric & Ruth – South African Wedding</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <style>
    /* ================= 2025 Design System ================= */
    :root{
      --gold-h:45; --gold-s:90%; --gold-l:45%;
      --gold: hsl(var(--gold-h),var(--gold-s),var(--gold-l));
      --gold-700: hsl(var(--gold-h),78%,38%);
      --gold-600: hsl(var(--gold-h),85%,40%);
      --gold-400: hsl(var(--gold-h),95%,55%);

      --beige: hsl(35, 20%, 88%);
      --dark: hsl(30, 8%, 8%);
      --white:#fff;

      --royal: #1E3A8A;
      --royal-strong: #0A2A6A;

      --shadow-elev-1: 0 5px 18px rgba(0,0,0,.08);
      --shadow-elev-2: 0 12px 30px rgba(0,0,0,.14);
      --shadow-elev-3: 0 30px 60px rgba(0,0,0,.18);

      --radius-lg: 20px;
      --radius-md: 14px;
      --radius-pill: 100px;

      --section-pad-y: clamp(56px, 6vw, 96px);
      --container: min(1000px, 92vw);
      --ease: cubic-bezier(.21,.88,.24,1);
    }

    * { box-sizing: border-box; margin:0; padding:0 }
    html { scroll-behavior:smooth; color-scheme: light }
    body {
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--dark);
      background:
        radial-gradient(1200px 1200px at 80% -10%, rgba(255,215,130,.25), transparent 60%),
        radial-gradient(1200px 1200px at -10% 90%, rgba(255,215,130,.18), transparent 60%),
        var(--beige);
      overflow-x: hidden;
    }

    /* ================= Header (WHITE + GOLD) ================= */
    header{
      position:fixed; inset:0 0 auto 0;
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 18px;
      background:#fff;
      color: var(--gold-600);
      border-bottom: 1px solid hsl(35 15% 85%);
      z-index: 9999;
    }
    .brand{
      font-family:'Playfair Display', serif;
      font-weight:700;
      letter-spacing:.4px;
      color: var(--gold-600);
      font-size: clamp(20px,2.4vw,24px);
      line-height:1;
      user-select:none;
    }
    .hamburger{
      border:0; cursor:pointer; outline:none;
      background: linear-gradient(145deg, #fff, #f6f6f6);
      color: var(--gold-600);
      border-radius: 12px;
      padding: .55rem .8rem;
      font-size: 1.4rem;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.7), 0 10px 20px rgba(0,0,0,.08);
      transition: transform .2s var(--ease), box-shadow .2s var(--ease);
    }
    .hamburger:active{ transform: translateY(1px) scale(.99) }

    /* ================= Fullscreen Navigation ================= */
    .nav-menu{
      position: fixed; inset:0;
      display:flex; flex-direction:column; align-items:center; justify-content:center; gap:14px;
      padding: 24px;
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(14px) saturate(120%);
      transform: translateX(-100%);
      transition: transform .45s var(--ease);
      z-index: 9998;
    }
    .nav-menu.open{ transform: translateX(0) }
    .nav-chip{
      display:inline-flex; align-items:center; justify-content:center; gap:.7rem;
      padding: .95rem 1.25rem;
      min-width: clamp(220px, 38vw, 520px);
      background: #fff;
      color: var(--dark); text-decoration:none; font-weight:600;
      border-radius: 16px;
      box-shadow: 0 1.5px 0 rgba(255,255,255,.9) inset, 0 12px 28px rgba(0,0,0,.12), 0 2px 8px rgba(0,0,0,.06);
      transition: transform .25s var(--ease), box-shadow .25s var(--ease), background .25s;
    }
    .nav-chip:hover{
      background: linear-gradient(180deg, #fff, #faf7ef);
      transform: translateY(-2px);
      box-shadow: 0 2px 0 rgba(255,255,255,1) inset, 0 22px 44px rgba(0,0,0,.16), 0 6px 16px rgba(0,0,0,.08);
    }
    .lang-button{ cursor:pointer; border:0; font: inherit; }

    /* ================= Hero ================= */
    .hero{
      min-height: 100svh;
      display:grid; place-items:center;
      padding: calc(68px + 3vh) 16px 24px;
      color:#fff; text-align:center;
      position: relative; isolation: isolate;
      background:
        radial-gradient(1200px 800px at 50% -10%, rgba(0,0,0,.45), transparent 60%),
        url('images/safari01.jpg') center/cover no-repeat fixed;
    }
    .hero::after{
      content:""; position:absolute; inset:0; pointer-events:none;
      background: radial-gradient(60% 60% at 50% 40%, transparent 40%, rgba(0,0,0,.35) 100%);
      z-index:-1;
    }
    /* Tight, elegant layout for title + CTA after removing the message chip */
    .hero-inner{
      max-width: var(--container);
      display:grid;
      justify-items:center;
      gap: clamp(16px, 3.5vh, 28px);       /* tidy spacing between title and CTA */
      padding-block: clamp(8px, 3vh, 24px); /* breathing room inside the hero */
      animation: rise .9s var(--ease) .1s both;
    }
    @keyframes rise { from{opacity:0; transform:translateY(12px)} to{opacity:1; transform:translateY(0)} }
    h1.hero-title{
      font-family:'Playfair Display', serif; font-weight:700;
      font-size: clamp(32px, 5.6vw, 58px);  /* slightly larger for impact */
      text-shadow: 0 18px 34px rgba(0,0,0,.42);
      letter-spacing:.2px;
      line-height:1.1;
      margin: 0;                            /* rely on grid gap for spacing */
    }
    .cta{
      justify-self:center; border:0; cursor:pointer; outline:none;
      padding: 1rem 1.5rem;
      border-radius: var(--radius-pill);
      font-weight:700; color:#fff;
      letter-spacing:.2px;
      background: linear-gradient(135deg, var(--gold), var(--gold-400));
      box-shadow: var(--shadow-elev-3);
      transition: transform .2s var(--ease), box-shadow .2s var(--ease);
    }
    .cta:hover{ transform: translateY(-2px); box-shadow: 0 30px 60px rgba(0,0,0,.25) }

    /* ================= Floating Quick Buttons ================= */
    .floating-nav{ position: fixed; right: 14px; bottom: 16px; display:flex; flex-direction:column; gap:.7rem; z-index: 9997 }
    .fab{
      width:52px; height:52px; border-radius:50%;
      display:grid; place-items:center; color:#fff; text-decoration:none;
      background: linear-gradient(135deg, var(--gold), var(--gold-400));
      box-shadow: var(--shadow-elev-2);
      transition: transform .2s var(--ease), box-shadow .2s var(--ease);
    }
    .fab:hover{ transform: translateY(-2px); box-shadow: var(--shadow-elev-3) }

    /* ================= Sections & Cards ================= */
    section{ padding: var(--section-pad-y) 0 }
    .wrap{ width: var(--container); margin: 0 auto; padding: 0 8px }

    .card{
      background: linear-gradient(135deg, var(--gold-400), var(--gold-700));
      border: 1px solid rgba(255,255,255,.35);
      color: #111;
      border-radius: var(--radius-lg);
      padding: clamp(22px, 3.6vw, 36px);
      box-shadow: var(--shadow-elev-2);
      transform-style: preserve-3d;
      transition: transform .25s var(--ease), box-shadow .25s var(--ease);
    }
    .card:hover{ transform: perspective(900px) translateZ(8px) }
    .card h2{
      font-family:'Playfair Display', serif;
      font-size: clamp(22px, 3.6vw, 30px);
      margin-bottom: 14px;
      color: #fff;
      text-align:center;
      letter-spacing:.2px;
    }

    .inner{
      background: rgba(255,255,255,.96);
      color:#111;
      border-radius: var(--radius-md);
      padding: clamp(18px, 3vw, 26px);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.9),
        0 18px 36px rgba(0,0,0,.14);
      font-size: 1.06rem;
      line-height: 1.65;
    }
    .inner ul, .inner ol { margin:.4rem 0 0 .95rem }
    .inner li { margin:.45rem 0; padding:.25rem 0 }
    .inner li + li { border-top: 1px solid rgba(0,0,0,.06); padding-top:.55rem; }

    .inner a{
      color: var(--royal);
      text-decoration: none;
      font-weight: 700;
      background-image: linear-gradient(to right, var(--gold) 0%, var(--gold-400) 100%);
      background-size: 0% 2px;
      background-position: 0 100%;
      background-repeat: no-repeat;
      transition: color .2s var(--ease), background-size .25s var(--ease);
      border-bottom: 1px solid rgba(30,58,138,.2);
    }
    .inner a:hover{
      color: var(--royal-strong);
      background-size: 100% 2px;
      border-bottom-color: transparent;
    }

    .headshot{
      width: 180px; height: 180px; border-radius: 50%;
      object-fit: cover; object-position: center;
      display:block; margin: 10px auto 12px auto;
      box-shadow: 0 14px 28px rgba(0,0,0,.25);
      border: 4px solid #fff;
    }

    /* ================= Gallery ================= */
    .gallery-grid{ display:grid; gap:14px; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); margin-top:8px }
    .gallery-grid img{
      width:100%; height:220px; object-fit:cover; border-radius: 14px; cursor:pointer;
      box-shadow: var(--shadow-elev-1);
      transition: transform .25s var(--ease), box-shadow .25s var(--ease);
    }
    .gallery-grid img:hover{ transform: translateY(-3px) scale(1.02); box-shadow: var(--shadow-elev-2) }

    /* Lightbox */
    .lightbox{ position: fixed; inset:0; background: rgba(0,0,0,.8); display:none; align-items:center; justify-content:center; gap:18px; z-index: 99999 }
    .lightbox.open{ display:flex }
    .lightbox img{ max-width: min(92vw, 1200px); max-height: 86vh; border-radius: 12px; box-shadow: 0 40px 80px rgba(0,0,0,.45) }
    .lb-btn{ cursor:pointer; border:0; background: rgba(255,255,255,.12); color:#fff; width:48px; height:48px; border-radius: 50%; font-size:22px; display:grid; place-items:center; transition: background .2s var(--ease) }
    .lb-btn:hover{ background: rgba(255,255,255,.22) }

    /* ================= Footer ================= */
    footer{ padding: 36px 0 64px; text-align:center; background: linear-gradient(180deg, #fbfaf4, #f4efe3) }
    footer h2{ text-align:center }
    .count{ display:inline-grid; grid-auto-flow:column; gap:10px; align-items:end; margin-top: 10px }
    .count-box{ background:#fff; color: var(--gold-600); border-radius: 12px; padding: 14px 16px; min-width:84px; box-shadow: var(--shadow-elev-1); font-weight:700 }
    .count-box small{ display:block; color: var(--dark); opacity:.7; font-weight:600 }
  </style>
</head>

<body>
  <!-- ================= Header ================= -->
  <header>
    <div class="brand" aria-label="Cédric & Ruth">C&R</div>
    <button id="menu-toggle" class="hamburger" aria-expanded="false" aria-controls="navMenu" aria-label="Open menu">☰</button>
  </header>

  <!-- ================= Fullscreen Nav ================= -->
  <nav id="navMenu" class="nav-menu" role="navigation" aria-label="Primary">
    <a class="nav-chip" href="#home">🏠 Accueil</a>
    <a class="nav-chip" href="#welcome">💍 Bienvenue</a>
    <a class="nav-chip" href="#travel">✈️ Voyage</a>
    <a class="nav-chip" href="#accommodation">🏨 Hébergement</a>
    <a class="nav-chip" href="#itinerary">📅 Itinéraire</a>
    <a class="nav-chip" href="#lobola">💒 Lobola & Mariage</a>
    <a class="nav-chip" href="#discover">🌍 Découvrir</a>
    <a class="nav-chip" href="#gallery">📸 Galerie</a>
    <a class="nav-chip" href="#emergency">🚨 Urgence</a>
    <button id="langToggle" class="nav-chip lang-button" type="button">🌍 FR</button>
  </nav>

  <!-- ================= Hero ================= -->
  <section id="home" class="hero">
    <div class="hero-inner">
      <h1 id="heroTitle" class="hero-title">Bienvenue en Afrique du Sud 🇿🇦</h1>
      <button class="cta" id="ctaStart">Commencez votre aventure</button>
    </div>
  </section>

  <!-- ================= Floating Quick Buttons ================= -->
  <div class="floating-nav">
    <a class="fab" href="#home" title="Accueil">🏠</a>
    <a class="fab" href="#lobola" title="Lobola">💒</a>
    <a class="fab" href="https://wa.me/27829627848" target="_blank" title="WhatsApp">📱</a>
    <a class="fab" href="mailto:phaahlaruth@gmail.com" title="Email">✉️</a>
  </div>

  <!-- ================= Sections (unchanged) ================= -->
  <section id="welcome">
    <div class="wrap">
      <article class="card reveal" data-tilt>
        <h2 id="welcomeTitle">💍 Bienvenue</h2>
        <img class="headshot" src="images/image1.jpg" alt="Portrait de Ruth & Cédric">
        <div class="inner">
          <div data-lang="fr">
            <p>Chère famille,</p>
            <p>Deux cultures, une seule histoire d’amour.</p>
            <p>Merci d’avoir voyagé de si loin pour écrire avec nous ce chapitre inoubliable de notre vie.</p>
            <p>C’est avec une immense joie que nous vous accueillons en Afrique du Sud pour célébrer notre mariage traditionnel.</p>
          </div>
          <div data-lang="en" style="display:none">
            <p>Dear family,</p>
            <p>Two cultures, one love story.</p>
            <p>Thank you for travelling from afar to write this unforgettable chapter of our life with us.</p>
            <p>It is with great joy that we welcome you to South Africa to celebrate our traditional wedding.</p>
          </div>
        </div>
      </article>
    </div>
  </section>

  <section id="travel">
    <div class="wrap">
      <article class="card reveal" data-tilt>
        <h2>✈️ Voyage & Arrivée</h2>
        <div class="inner">
          <ul>
            <li>🛬 <strong>08:30</strong> — Arrival at <a href="https://maps.google.com/?q=OR+Tambo+International+Airport" target="_blank">OR Tambo International Airport</a></li>
            <li>🤝 Pick-up by Ruth &amp; Cedric</li>
            <li>🚆 Gautrain to Sandton — arrive at <a href="https://maps.google.com/?q=Sandton+Gautrain+Station" target="_blank">Sandton Gautrain Station</a></li>
            <li>🍽️ Travel to Bryanston for brunch (<a href="https://maps.google.com/?q=Bryanston+Johannesburg" target="_blank">map</a>)</li>
            <li>🏨 14:00 — Check-in at <a href="https://maps.google.com/?q=Sandton+Sun+%26+Towers" target="_blank">Sandton Sun &amp; Towers</a></li>
          </ul>
          <p style="margin-top:.6rem">
            Useful: 🗺️ <a href="https://www.gautrain.co.za/" target="_blank">Gautrain site</a> • ✈️ <a href="https://www.airports.co.za/airports/or-tambo-international-airport" target="_blank">OR Tambo info</a>
          </p>
        </div>
      </article>
    </div>
  </section>

  <section id="accommodation">
    <div class="wrap">
      <article class="card reveal" data-tilt>
        <h2>🏨 Hébergement</h2>
        <div class="inner">
          <ol>
            <li>
              🏨 <strong>Sandton Sun &amp; Towers</strong> (24–26 Oct)<br/>
              📍 <a href="https://maps.google.com/?q=Corner+Fifth+and+Alice+Streets,+Sandton,+2146,+Johannesburg" target="_blank">Corner Fifth &amp; Alice Streets, Sandton, Johannesburg</a><br/>
              📞 <a href="tel:+27117805000">+27 11 780 5000</a>
            </li>
            <li>
              🏨 <strong>Bakubung Bush Lodge</strong> (26–28 Oct)<br/>
              📍 <a href="https://maps.google.com/?q=Bakubung+Gate,+Pilanesberg+National+Park,+0300,+Ledig" target="_blank">Bakubung Gate, Pilanesberg National Park, Ledig</a>
            </li>
            <li>
              🏠 <strong>Private Apartment</strong> (28–31 Oct)<br/>
              📍 <a href="https://maps.google.com/?q=15+West+Road+South,+Sandton,+2057,+Johannesburg" target="_blank">15 West Road South, Sandton, Johannesburg</a>
            </li>
            <li>
              🏡 <strong>Sandstone House</strong> (31 Oct–2 Nov)<br/>
              📍 <a href="https://maps.google.com/?q=Green+Valley+Road,+Franschhoek,+7690" target="_blank">Green Valley Road, Franschhoek</a>
            </li>
            <li>
              🏨 <strong>Cape Royale Luxury Apartments</strong> (2–3 Nov)<br/>
              📍 <a href="https://maps.google.com/?q=47+Main+Road,+Green+Point,+8051,+Cape+Town" target="_blank">47 Main Road, Green Point, Cape Town</a><br/>
              📞 <a href="tel:+27793262167">+27 79 326 2167</a>
            </li>
          </ol>
        </div>
      </article>
    </div>
  </section>

  <section id="itinerary">
    <div class="wrap">
      <article class="card reveal" data-tilt>
        <h2>📅 Itinéraire</h2>
        <div class="inner">
          <p data-lang="fr">Explorez le programme du séjour jour par jour (détails à venir).</p>
          <p data-lang="en" style="display:none">Explore the day-by-day schedule (details coming soon).</p>
        </div>
      </article>
    </div>
  </section>

  <section id="lobola">
    <div class="wrap">
      <article class="card reveal" data-tilt>
        <h2>💒 Lobola & Mariage</h2>
        <div class="inner">
          <p data-lang="fr">Cérémonie traditionnelle suivie de notre célébration.</p>
          <p data-lang="en" style="display:none">Traditional ceremony followed by our celebration.</p>
          <p>💬 Learn more about Lobola: <a href="https://en.wikipedia.org/wiki/Lobolo" target="_blank">Wikipedia</a></p>
        </div>
      </article>
    </div>
  </section>

  <section id="discover">
    <div class="wrap">
      <article class="card reveal" data-tilt>
        <h2>🌍 Découvrir</h2>
        <div class="inner">
          <p data-lang="fr">Culture sud-africaine, safaris, paysages et plus encore.</p>
          <p data-lang="en" style="display:none">South African culture, safaris, landscapes and more.</p>
          <p>🦁 Parks: <a href="https://www.sanparks.org/" target="_blank">SANParks</a> • 🍷 <a href="https://www.franschhoek.org.za/" target="_blank">Franschhoek</a></p>
        </div>
      </article>
    </div>
  </section>

  <section id="gallery">
    <div class="wrap">
      <article class="card reveal">
        <h2>📸 Galerie</h2>
        <div class="inner">
          <div class="gallery-grid" id="galleryGrid">
            <img src="images/safari1.jpg" alt="Safari 1" data-full="images/safari1.jpg">
            <img src="images/safari2.jpg" alt="Safari 2" data-full="images/safari2.jpg">
            <img src="images/safari3.jpg" alt="Safari 3" data-full="images/safari3.jpg">
            <img src="images/safari4.jpg" alt="Safari 4" data-full="images/safari4.jpg">
          </div>
        </div>
      </article>
    </div>
  </section>

  <section id="emergency">
    <div class="wrap">
      <article class="card reveal" data-tilt>
        <h2>🚨 Urgence</h2>
        <div class="inner">
          <p>📞 <a href="tel:10111">Police/Ambulance: 10111</a></p>
          <p>📱 <a href="tel:+27829627848">Ruth: +27 82 962 7848</a></p>
        </div>
      </article>
    </div>
  </section>

  <!-- ================= Footer / Countdown ================= -->
  <footer>
    <div class="wrap">
      <h2 style="font-family:'Playfair Display',serif; color:var(--gold-600); margin-bottom:10px; text-align:center;">Jours avant le mariage</h2>
      <div class="count" aria-live="polite">
        <div class="count-box"><span id="days">--</span><small>jours</small></div>
        <div class="count-box"><span id="hours">--</span><small>heures</small></div>
        <div class="count-box"><span id="minutes">--</span><small>minutes</small></div>
        <div class="count-box"><span id="seconds">--</span><small>secondes</small></div>
      </div>
    </div>
  </footer>

  <!-- ================= Lightbox ================= -->
  <div id="lightbox" class="lightbox" aria-modal="true" role="dialog" aria-label="Image preview">
    <button class="lb-btn" id="lbPrev" aria-label="Previous">‹</button>
    <img id="lbImg" src="" alt="">
    <button class="lb-btn" id="lbNext" aria-label="Next">›</button>
    <button class="lb-btn" id="lbClose" aria-label="Close" style="position:absolute; top:24px; right:24px;">✖</button>
  </div>

  <script>
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];

    const menuBtn = $('#menu-toggle');
    const navMenu = $('#navMenu');
    const langToggle = $('#langToggle');

    const setMenu = (open) => {
      navMenu.classList.toggle('open', open);
      menuBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
      menuBtn.textContent = open ? '✖' : '☰';
    };
    menuBtn.addEventListener('click', () => setMenu(!navMenu.classList.contains('open')));
    $$('.nav-chip[href^="#"]').forEach(a => a.addEventListener('click', () => setMenu(false)));

    const t = {
      fr: { hero:"Bienvenue en Afrique du Sud 🇿🇦", cta:"Commencez votre aventure",
            welcomeTitle:"💍 Bienvenue", welcomeText:"Nous sommes ravis de vous accueillir en Afrique du Sud pour notre mariage.",
            langBtn:"🌍 FR",
            nav:["🏠 Accueil","💍 Bienvenue","✈️ Voyage","🏨 Hébergement","📅 Itinéraire","💒 Lobola & Mariage","🌍 Découvrir","📸 Galerie","🚨 Urgence"] },
      en: { hero:"Welcome to South Africa 🇿🇦", cta:"Begin Your Journey",
            welcomeTitle:"💍 Welcome", welcomeText:"We are delighted to welcome you to South Africa for our wedding.",
            langBtn:"🌍 EN",
            nav:["🏠 Home","💍 Welcome","✈️ Travel","🏨 Accommodation","📅 Itinerary","💒 Lobola & Wedding","🌍 Discover","📸 Gallery","🚨 Emergency"] }
    };
    let lang = 'fr';

    const applyLang = () => {
      const L = t[lang];
      $('#heroTitle').textContent = L.hero;
      $('#ctaStart').textContent = L.cta;
      $('#welcomeTitle').textContent = L.welcomeTitle;
      $('#langToggle').textContent = L.langBtn;

      const navLabels = $$('.nav-chip[href^="#"]');
      navLabels.forEach((el, i) => el.textContent = L.nav[i] || el.textContent);

      $$('[data-lang]').forEach(el=>{
        el.style.display = (el.getAttribute('data-lang') === lang) ? '' : 'none';
      });
    };
    applyLang();

    langToggle.addEventListener('click', () => {
      lang = (lang==='fr') ? 'en' : 'fr';
      applyLang();
      setMenu(false);
    });

    $('#ctaStart').addEventListener('click', () => { $('#welcome').scrollIntoView({ behavior:'smooth', block:'start' }); });

    const target = new Date("2025-11-01T10:00:00+02:00");
    const tick = () => {
      const now = new Date();
      const diff = Math.max(0, target - now);
      const d = Math.floor(diff / 86400000);
      const h = Math.floor(diff % 86400000 / 3600000);
      const m = Math.floor(diff % 3600000 / 60000);
      const s = Math.floor(diff % 60000 / 1000);
      $('#days').textContent = d;
      $('#hours').textContent = String(h).padStart(2,'0');
      $('#minutes').textContent = String(m).padStart(2,'0');
      $('#seconds').textContent = String(s).padStart(2,'0');
    };
    tick(); setInterval(tick, 1000);

    const io = ('IntersectionObserver' in window)
      ? new IntersectionObserver(entries=>{
          entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('in'); io.unobserve(e.target); } });
        }, {threshold:.15})
      : null;
    if(io){ $$('.reveal').forEach(el=> io.observe(el)) } else { $$('.reveal').forEach(el=> el.classList.add('in')) }

    const applyTilt = (card) => {
      let rect;
      const onMove = (e) => {
        rect = rect || card.getBoundingClientRect();
        const x = (e.clientX - rect.left) / rect.width - .5;
        const y = (e.clientY - rect.top) / rect.height - .5;
        card.style.transform = `perspective(900px) rotateX(${(-y*4).toFixed(2)}deg) rotateY(${(x*6).toFixed(2)}deg) translateZ(10px)`;
      };
      const reset = () => { card.style.transform = '' ; rect = null };
      card.addEventListener('pointermove', onMove);
      card.addEventListener('pointerleave', reset);
    };
    $$('.card[data-tilt]').forEach(applyTilt);

    const lb = $('#lightbox'), lbImg = $('#lbImg'), lbPrev = $('#lbPrev'), lbNext = $('#lbNext'), lbClose = $('#lbClose');
    const thumbs = $$('#galleryGrid img'); let idx = 0;

    const openLB = (i) => { idx = i; lbImg.src = thumbs[idx].dataset.full || thumbs[idx].src; lb.classList.add('open'); document.body.style.overflow = 'hidden'; };
    const closeLB = () => { lb.classList.remove('open'); document.body.style.overflow = '' };
    const step = (dir) => { idx = (idx + dir + thumbs.length) % thumbs.length; lbImg.src = thumbs[idx].dataset.full || thumbs[idx].src; };

    thumbs.forEach((img, i)=> img.addEventListener('click', ()=> openLB(i)));
    lbClose.addEventListener('click', closeLB);
    lbPrev.addEventListener('click', ()=> step(-1));
    lbNext.addEventListener('click', ()=> step(1));
    lb.addEventListener('click', (e)=> { if(e.target === lb) closeLB() });
    window.addEventListener('keydown', (e)=>{ if(!lb.classList.contains('open')) return; if(e.key==='Escape') closeLB(); if(e.key==='ArrowLeft') step(-1); if(e.key==='ArrowRight') step(1); });
  </script>
</body>
</html>